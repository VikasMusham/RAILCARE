<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RailMitra â€¢ Sign In</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Swiss Design - Monochrome Palette */
      --pure-black: #000000;
      --rich-black: #0a0a0a;
      --charcoal: #141414;
      --graphite: #1a1a1a;
      --slate: #252525;
      --steel: #333333;
      --silver: #666666;
      --pearl: #999999;
      --cloud: #cccccc;
      --snow: #f5f5f5;
      --pure-white: #ffffff;
      
      /* Accent Colors */
      --emerald: #10b981;
      --amber: #f59e0b;
      --ruby: #ef4444;
      --sapphire: #3b82f6;
      
      /* Typography Scale */
      --text-xs: 11px;
      --text-sm: 13px;
      --text-base: 15px;
      --text-lg: 17px;
      --text-xl: 20px;
      --text-2xl: 24px;
      --text-3xl: 32px;
      --text-4xl: 40px;
      --text-5xl: 56px;
      
      /* Spacing */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      --space-12: 48px;
      --space-16: 64px;
      
      /* Radius */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;
      
      /* Transitions */
      --ease-out: cubic-bezier(0.4, 0, 0.2, 1);
      --duration-fast: 150ms;
      --duration-base: 250ms;
      --duration-slow: 400ms;
    }

    /* Light Mode (Default) */
    body {
      --bg-primary: var(--pure-white);
      --bg-secondary: var(--snow);
      --bg-tertiary: var(--cloud);
      --text-primary: var(--pure-black);
      --text-secondary: var(--silver);
      --text-tertiary: var(--pearl);
      --border-color: rgba(0, 0, 0, 0.08);
      --card-bg: var(--pure-white);
      --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 8px 32px rgba(0, 0, 0, 0.04);
      --card-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.12), 0 16px 48px rgba(0, 0, 0, 0.08);
      --input-bg: var(--snow);
    }

    /* Dark Mode */
    body.dark {
      --bg-primary: var(--rich-black);
      --bg-secondary: var(--charcoal);
      --bg-tertiary: var(--graphite);
      --text-primary: var(--pure-white);
      --text-secondary: var(--pearl);
      --text-tertiary: var(--silver);
      --border-color: rgba(255, 255, 255, 0.08);
      --card-bg: var(--graphite);
      --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 8px 32px rgba(0, 0, 0, 0.2);
      --card-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.4), 0 16px 48px rgba(0, 0, 0, 0.3);
      --input-bg: var(--slate);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Navigation */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      padding: var(--space-4) var(--space-8);
      background: var(--bg-primary);
      border-bottom: 1px solid var(--border-color);
      backdrop-filter: blur(20px);
    }

    .navbar-inner {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      text-decoration: none;
      color: var(--text-primary);
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: var(--text-primary);
      color: var(--bg-primary);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .logo-text {
      font-size: var(--text-xl);
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: var(--space-4);
    }

    .theme-toggle {
      width: 40px;
      height: 40px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-md);
      transition: all var(--duration-fast) var(--ease-out);
    }

    .theme-toggle:hover {
      background: var(--bg-secondary);
      color: var(--text-primary);
    }

    .nav-link {
      font-size: var(--text-sm);
      font-weight: 500;
      color: var(--text-secondary);
      text-decoration: none;
      transition: color var(--duration-fast) var(--ease-out);
    }

    .nav-link:hover {
      color: var(--text-primary);
    }

    /* Main Container */
    .main-container {
      flex: 1;
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 100vh;
      padding-top: 73px;
    }

    /* Left Panel - Branding */
    .brand-panel {
      background: var(--text-primary);
      color: var(--bg-primary);
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: var(--space-16);
      position: relative;
      overflow: hidden;
    }

    .brand-panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }

    .brand-content {
      position: relative;
      z-index: 1;
      max-width: 480px;
    }

    .brand-title {
      font-size: var(--text-5xl);
      font-weight: 800;
      letter-spacing: -2px;
      line-height: 1.1;
      margin-bottom: var(--space-6);
    }

    .brand-title span {
      display: block;
      opacity: 0.5;
    }

    .brand-description {
      font-size: var(--text-lg);
      opacity: 0.7;
      line-height: 1.7;
      margin-bottom: var(--space-10);
    }

    .brand-features {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .brand-feature {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      font-size: var(--text-base);
      opacity: 0.8;
    }

    .brand-feature svg {
      width: 24px;
      height: 24px;
      color: var(--emerald);
      flex-shrink: 0;
    }

    .floating-cards {
      position: absolute;
      right: 40px;
      bottom: 80px;
      transform: rotate(-6deg);
    }

    .floating-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-lg);
      padding: var(--space-5);
      margin-bottom: var(--space-4);
      width: 220px;
    }

    .floating-card-header {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      margin-bottom: var(--space-3);
    }

    .floating-card-icon {
      width: 32px;
      height: 32px;
      background: var(--emerald);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .floating-card-title {
      font-size: var(--text-sm);
      font-weight: 600;
    }

    .floating-card-text {
      font-size: var(--text-xs);
      opacity: 0.6;
    }

    /* Right Panel - Auth Forms */
    .auth-panel {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: var(--space-8);
      background: var(--bg-primary);
    }

    .auth-container {
      width: 100%;
      max-width: 420px;
    }

    .auth-header {
      text-align: center;
      margin-bottom: var(--space-10);
    }

    .auth-header h1 {
      font-size: var(--text-3xl);
      font-weight: 700;
      letter-spacing: -1px;
      margin-bottom: var(--space-3);
    }

    .auth-header p {
      color: var(--text-secondary);
      font-size: var(--text-base);
    }

    /* Tab Switcher */
    .auth-tabs {
      display: flex;
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
      padding: var(--space-1);
      margin-bottom: var(--space-8);
    }

    .auth-tab {
      flex: 1;
      padding: var(--space-4);
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-size: var(--text-sm);
      font-weight: 600;
      cursor: pointer;
      border-radius: var(--radius-md);
      transition: all var(--duration-fast) var(--ease-out);
    }

    .auth-tab.active {
      background: var(--card-bg);
      color: var(--text-primary);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .auth-tab:hover:not(.active) {
      color: var(--text-primary);
    }

    /* Form Styles */
    .auth-form {
      display: none;
    }

    .auth-form.active {
      display: block;
    }

    .form-group {
      margin-bottom: var(--space-5);
    }

    .form-label {
      display: block;
      font-size: var(--text-sm);
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: var(--space-2);
    }

    .form-input {
      width: 100%;
      padding: var(--space-4) var(--space-5);
      background: var(--input-bg);
      border: 2px solid transparent;
      border-radius: var(--radius-md);
      font-size: var(--text-base);
      color: var(--text-primary);
      transition: all var(--duration-fast) var(--ease-out);
      font-family: inherit;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--text-primary);
      background: var(--bg-primary);
    }

    .form-input::placeholder {
      color: var(--text-tertiary);
    }

    .form-select {
      width: 100%;
      padding: var(--space-4) var(--space-5);
      background: var(--input-bg);
      border: 2px solid transparent;
      border-radius: var(--radius-md);
      font-size: var(--text-base);
      color: var(--text-primary);
      transition: all var(--duration-fast) var(--ease-out);
      font-family: inherit;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
    }

    .form-select:focus {
      outline: none;
      border-color: var(--text-primary);
      background-color: var(--bg-primary);
    }

    .form-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-6);
    }

    .form-link {
      font-size: var(--text-sm);
      color: var(--text-secondary);
      text-decoration: none;
      transition: color var(--duration-fast) var(--ease-out);
    }

    .form-link:hover {
      color: var(--text-primary);
    }

    /* Submit Button */
    .btn-submit {
      width: 100%;
      padding: var(--space-5);
      background: var(--text-primary);
      color: var(--bg-primary);
      border: none;
      border-radius: var(--radius-md);
      font-size: var(--text-base);
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-out);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-3);
    }

    .btn-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    .btn-submit:active {
      transform: translateY(0);
    }

    .btn-submit:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .btn-submit svg {
      width: 20px;
      height: 20px;
    }

    /* Message Display */
    .message {
      padding: var(--space-4);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      margin-bottom: var(--space-5);
      display: none;
    }

    .message.error {
      display: block;
      background: rgba(239, 68, 68, 0.1);
      color: var(--ruby);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }

    .message.success {
      display: block;
      background: rgba(16, 185, 129, 0.1);
      color: var(--emerald);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    /* Divider */
    .divider {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      margin: var(--space-8) 0;
    }

    .divider-line {
      flex: 1;
      height: 1px;
      background: var(--border-color);
    }

    .divider-text {
      font-size: var(--text-xs);
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Social Buttons */
    .social-buttons {
      display: flex;
      gap: var(--space-4);
    }

    .btn-social {
      flex: 1;
      padding: var(--space-4);
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      font-size: var(--text-sm);
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-2);
      transition: all var(--duration-fast) var(--ease-out);
    }

    .btn-social:hover {
      background: var(--bg-tertiary);
      border-color: var(--text-tertiary);
    }

    .btn-social svg {
      width: 20px;
      height: 20px;
    }

    /* Password Reset Section */
    .reset-section {
      display: none;
      margin-top: var(--space-6);
      padding: var(--space-6);
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
    }

    .reset-section.active {
      display: block;
    }

    .reset-section h3 {
      font-size: var(--text-lg);
      font-weight: 600;
      margin-bottom: var(--space-4);
    }

    .reset-row {
      display: flex;
      gap: var(--space-3);
      margin-top: var(--space-4);
    }

    .reset-row .form-input {
      flex: 1;
    }

    .btn-reset {
      padding: var(--space-4) var(--space-6);
      background: var(--text-primary);
      color: var(--bg-primary);
      border: none;
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      transition: all var(--duration-fast) var(--ease-out);
    }

    .btn-reset:hover {
      opacity: 0.9;
    }

    /* Footer */
    .auth-footer {
      text-align: center;
      margin-top: var(--space-8);
      font-size: var(--text-sm);
      color: var(--text-tertiary);
    }

    .auth-footer a {
      color: var(--text-secondary);
      text-decoration: none;
    }

    .auth-footer a:hover {
      color: var(--text-primary);
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .main-container {
        grid-template-columns: 1fr;
      }

      .brand-panel {
        display: none;
      }

      .auth-panel {
        padding: var(--space-6);
      }
    }

    @media (max-width: 480px) {
      .auth-container {
        max-width: 100%;
      }

      .auth-header h1 {
        font-size: var(--text-2xl);
      }

      .navbar {
        padding: var(--space-3) var(--space-4);
      }

      .social-buttons {
        flex-direction: column;
      }
    }

    /* Loading Animation */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading {
      width: 20px;
      height: 20px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    /* Password Strength Indicator */
    .password-strength {
      margin-top: var(--space-2);
      height: 4px;
      background: var(--bg-tertiary);
      border-radius: 2px;
      overflow: hidden;
    }

    .password-strength-bar {
      height: 100%;
      width: 0;
      transition: all var(--duration-base) var(--ease-out);
    }

    .password-strength-bar.weak { width: 33%; background: var(--ruby); }
    .password-strength-bar.medium { width: 66%; background: var(--amber); }
    .password-strength-bar.strong { width: 100%; background: var(--emerald); }

    /* Input with Icon */
    .input-group {
      position: relative;
    }

    .input-icon {
      position: absolute;
      left: var(--space-4);
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-tertiary);
      pointer-events: none;
    }

    .input-group .form-input {
      padding-left: var(--space-12);
    }

    .toggle-password {
      position: absolute;
      right: var(--space-4);
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--text-tertiary);
      cursor: pointer;
      padding: var(--space-1);
    }

    .toggle-password:hover {
      color: var(--text-secondary);
    }
  </style>
</head>
<body>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="navbar-inner">
      <a href="passenger-premium.html" class="logo">
        <div class="logo-icon">ðŸš„</div>
        <span class="logo-text">RailMitra</span>
      </a>
      
      <div class="nav-actions">
        <a href="passenger-premium.html" class="nav-link">Home</a>
        <a href="passenger-premium.html" class="nav-link">Book Now</a>
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
          <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="main-container">
    
    <!-- Left Panel - Branding -->
    <div class="brand-panel">
      <div class="brand-content">
        <h1 class="brand-title">
          Your Journey,
          <span>Our Care</span>
        </h1>
        <p class="brand-description">
          Experience seamless railway station assistance with verified helpers, 
          real-time tracking, and premium service at your fingertips.
        </p>
        
        <div class="brand-features">
          <div class="brand-feature">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            <span>Verified & Trained Assistants</span>
          </div>
          <div class="brand-feature">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span>Real-time Service Tracking</span>
          </div>
          <div class="brand-feature">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            <span>Secure & Insured Services</span>
          </div>
          <div class="brand-feature">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
            <span>Rated 4.9/5 by Passengers</span>
          </div>
        </div>
      </div>

      <!-- Floating Cards -->
      <div class="floating-cards">
        <div class="floating-card">
          <div class="floating-card-header">
            <div class="floating-card-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="white" stroke="none">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01" fill="none" stroke="white" stroke-width="2"></polyline>
              </svg>
            </div>
            <div>
              <div class="floating-card-title">Booking Confirmed</div>
              <div class="floating-card-text">Porter assigned in 30s</div>
            </div>
          </div>
        </div>
        <div class="floating-card" style="transform: translateX(20px);">
          <div class="floating-card-header">
            <div class="floating-card-icon" style="background: var(--sapphire);">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
            </div>
            <div>
              <div class="floating-card-title">Live Tracking</div>
              <div class="floating-card-text">Assistant arriving...</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Panel - Auth Forms -->
    <div class="auth-panel">
      <div class="auth-container">
        
        <div class="auth-header">
          <h1>Welcome to RailMitra</h1>
          <p>Sign in to book assistance or manage your services</p>
        </div>

        <!-- Tab Switcher -->
        <div class="auth-tabs">
          <button class="auth-tab active" onclick="showForm('login')">Sign In</button>
          <button class="auth-tab" onclick="showForm('register')">Create Account</button>
        </div>

        <!-- Login Form -->
        <form id="loginForm" class="auth-form active">
          <div id="loginMsg" class="message"></div>
          
          <div class="form-group">
            <label class="form-label">Phone Number</label>
            <div class="input-group">
              <span class="input-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
              </span>
              <input type="tel" id="loginPhone" class="form-input" placeholder="Enter your phone number" required>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="input-group">
              <span class="input-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
              </span>
              <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" required>
              <button type="button" class="toggle-password" onclick="togglePassword('loginPassword', this)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>

          <div class="form-row">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="rememberMe" style="width: 16px; height: 16px;">
              <span style="font-size: var(--text-sm); color: var(--text-secondary);">Remember me</span>
            </label>
            <a href="#" class="form-link" onclick="toggleReset(event)">Forgot password?</a>
          </div>

          <button type="submit" class="btn-submit" id="loginBtn">
            <span>Sign In</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </button>

          <!-- Password Reset Section -->
          <div id="resetSection" class="reset-section">
            <h3>Reset Your Password</h3>
            <div class="form-group">
              <label class="form-label">Phone Number</label>
              <input type="tel" id="resetPhone" class="form-input" placeholder="Enter your phone number">
            </div>
            <button type="button" class="btn-reset" onclick="requestReset()">Send Reset Token</button>
            <div id="resetMsg" class="message" style="margin-top: var(--space-4);"></div>
            
            <div class="reset-row" style="margin-top: var(--space-5);">
              <input type="text" id="resetToken" class="form-input" placeholder="Token">
              <input type="password" id="resetNewPassword" class="form-input" placeholder="New Password">
              <button type="button" class="btn-reset" onclick="doReset()">Reset</button>
            </div>
          </div>
        </form>

        <!-- Register Form -->
        <form id="registerForm" class="auth-form">
          <div id="regMsg" class="message"></div>

          <div class="form-group">
            <label class="form-label">Full Name</label>
            <div class="input-group">
              <span class="input-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              </span>
              <input type="text" id="regName" class="form-input" placeholder="Enter your full name" required>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Phone Number</label>
            <div class="input-group">
              <span class="input-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
              </span>
              <input type="tel" id="regPhone" class="form-input" placeholder="Enter your phone number" required>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="input-group">
              <span class="input-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
              </span>
              <input type="password" id="regPassword" class="form-input" placeholder="Create a strong password" required oninput="checkPasswordStrength(this.value)">
              <button type="button" class="toggle-password" onclick="togglePassword('regPassword', this)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
            <div class="password-strength">
              <div id="passwordStrengthBar" class="password-strength-bar"></div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">I want to</label>
            <select id="regRole" class="form-select">
              <option value="passenger">Book Assistance (Passenger)</option>
              <option value="assistant">Provide Assistance (Assistant)</option>
              <option value="admin">Manage Platform (Admin)</option>
            </select>
          </div>

          <div style="margin-bottom: var(--space-6);">
            <label style="display: flex; align-items: flex-start; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="agreeTerms" required style="width: 16px; height: 16px; margin-top: 2px;">
              <span style="font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.5;">
                I agree to the <a href="#" style="color: var(--text-primary);">Terms of Service</a> 
                and <a href="#" style="color: var(--text-primary);">Privacy Policy</a>
              </span>
            </label>
          </div>

          <button type="submit" class="btn-submit" id="registerBtn">
            <span>Create Account</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </button>
        </form>

        <div class="auth-footer">
          <p>By continuing, you agree to RailMitra's Terms of Use</p>
        </div>

      </div>
    </div>
  </div>

  <script>
    // Theme Toggle
    function toggleTheme() {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    }

    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
    }

    // Form Switching
    function showForm(form) {
      document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
      
      if (form === 'login') {
        document.querySelectorAll('.auth-tab')[0].classList.add('active');
        document.getElementById('loginForm').classList.add('active');
      } else {
        document.querySelectorAll('.auth-tab')[1].classList.add('active');
        document.getElementById('registerForm').classList.add('active');
      }
    }

    // Toggle Password Visibility
    function togglePassword(inputId, button) {
      const input = document.getElementById(inputId);
      const type = input.type === 'password' ? 'text' : 'password';
      input.type = type;
      
      button.innerHTML = type === 'password' 
        ? `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>`
        : `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
            <line x1="1" y1="1" x2="23" y2="23"></line>
          </svg>`;
    }

    // Password Strength
    function checkPasswordStrength(password) {
      const bar = document.getElementById('passwordStrengthBar');
      bar.className = 'password-strength-bar';
      
      if (password.length === 0) {
        bar.style.width = '0';
        return;
      }
      
      let strength = 0;
      if (password.length >= 8) strength++;
      if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
      if (/\d/.test(password)) strength++;
      if (/[^a-zA-Z0-9]/.test(password)) strength++;
      
      if (strength <= 1) bar.classList.add('weak');
      else if (strength <= 2) bar.classList.add('medium');
      else bar.classList.add('strong');
    }

    // Toggle Reset Section
    function toggleReset(e) {
      e.preventDefault();
      document.getElementById('resetSection').classList.toggle('active');
    }

    // API Base
    const API = '/api';

    // Show Message
    function showMessage(elementId, text, type) {
      const el = document.getElementById(elementId);
      el.textContent = text;
      el.className = 'message ' + type;
    }

    // Login Handler
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const btn = document.getElementById('loginBtn');
      const originalContent = btn.innerHTML;
      btn.innerHTML = '<div class="loading"></div><span>Signing in...</span>';
      btn.disabled = true;

      try {
        const res = await fetch(`${API}/auth/login`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            phone: document.getElementById('loginPhone').value,
            password: document.getElementById('loginPassword').value
          })
        });
        
        const data = await res.json();
        
        if (res.ok && data.token) {
          console.log('[Login] Token received, saving to localStorage...');
          localStorage.setItem('railcare_token', data.token);
          console.log('[Login] Token saved. Verification:', localStorage.getItem('railcare_token') ? 'SUCCESS' : 'FAILED');
          showMessage('loginMsg', 'Login successful! Redirecting...', 'success');
          
          // Redirect based on role
          const payload = JSON.parse(atob(data.token.split('.')[1]));
          console.log('[Login] User role:', payload.role);
          setTimeout(() => {
            if (payload.role === 'admin') {
              window.location.href = 'admin-premium.html';
            } else if (payload.role === 'assistant') {
              window.location.href = 'assistant-premium.html';
            } else {
              window.location.href = 'passenger-premium.html';
            }
          }, 1000);
        } else {
          showMessage('loginMsg', data.message || 'Login failed', 'error');
        }
      } catch (err) {
        showMessage('loginMsg', 'Connection error. Please try again.', 'error');
      }

      btn.innerHTML = originalContent;
      btn.disabled = false;
    });

    // Register Handler
    document.getElementById('registerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const btn = document.getElementById('registerBtn');
      const originalContent = btn.innerHTML;
      btn.innerHTML = '<div class="loading"></div><span>Creating account...</span>';
      btn.disabled = true;

      try {
        const res = await fetch(`${API}/auth/register`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: document.getElementById('regName').value,
            phone: document.getElementById('regPhone').value,
            password: document.getElementById('regPassword').value,
            role: document.getElementById('regRole').value
          })
        });
        
        const data = await res.json();
        
        if (res.ok && data.token) {
          // Auto-login after successful registration
          console.log('[Register] Success, auto-logging in...');
          localStorage.setItem('railcare_token', data.token);
          showMessage('regMsg', 'Account created! Redirecting...', 'success');
          
          // Redirect based on role
          const payload = JSON.parse(atob(data.token.split('.')[1]));
          setTimeout(() => {
            if (payload.role === 'admin') {
              window.location.href = 'admin-premium.html';
            } else if (payload.role === 'assistant') {
              window.location.href = 'assistant-premium.html';
            } else {
              window.location.href = 'passenger-premium.html';
            }
          }, 1000);
        } else if (res.ok) {
          // Fallback if no token returned
          showMessage('regMsg', 'Account created! You can now sign in.', 'success');
          setTimeout(() => showForm('login'), 1500);
        } else {
          showMessage('regMsg', data.message || 'Registration failed', 'error');
        }
      } catch (err) {
        showMessage('regMsg', 'Connection error. Please try again.', 'error');
      }

      btn.innerHTML = originalContent;
      btn.disabled = false;
    });

    // Password Reset Request
    async function requestReset() {
      const phone = document.getElementById('resetPhone').value;
      if (!phone) {
        showMessage('resetMsg', 'Please enter your phone number', 'error');
        return;
      }

      try {
        const res = await fetch(`${API}/auth/request-reset`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phone })
        });
        
        const data = await res.json();
        showMessage('resetMsg', data.message || 'Check your phone for the reset token', 'success');
      } catch (err) {
        showMessage('resetMsg', 'Connection error', 'error');
      }
    }

    // Password Reset
    async function doReset() {
      const phone = document.getElementById('resetPhone').value;
      const token = document.getElementById('resetToken').value;
      const newPassword = document.getElementById('resetNewPassword').value;

      if (!phone || !token || !newPassword) {
        showMessage('resetMsg', 'Please fill in all fields', 'error');
        return;
      }

      try {
        const res = await fetch(`${API}/auth/reset-password`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phone, token, newPassword })
        });
        
        const data = await res.json();
        
        if (res.ok) {
          showMessage('resetMsg', 'Password reset successfully! You can now login.', 'success');
          document.getElementById('resetSection').classList.remove('active');
        } else {
          showMessage('resetMsg', data.msg || 'Reset failed', 'error');
        }
      } catch (err) {
        showMessage('resetMsg', 'Connection error', 'error');
      }
    }

    // Check if already logged in - only auto-redirect if not explicitly visiting login page
    // Don't auto-redirect - let user stay on login page if they want to switch accounts
  </script>

</body>
</html>
